async function createProofsOfOwnershipPerIssuer(
    issuers: AgentInfo[],
    holderDid: string,
    payload: string
): Promise<string[]> {

    const privKeyHex = '5e9c48b3b8f10589adac746ea63b63dfcbd4708ff032fd0dcc9c7c1aa045a53c'
    const address = "0x03A7C4B3126E57bABe1206090C52F4070A9b381e"
    const privKeyHex2 = '423c950596abae910e6bc845859ba561b1977cffae4174f2c9c40596c2903261'
    const address2 = "0xc97F8bEb6A5abE8a1dA85AF4649f2eB356194fed"

    const keyETH1:MinimalImportableKey = {
        type: 'Secp256k1',
        privateKeyHex: privKeyHex,
        kms: 'local'
    };
    const keyETH2:MinimalImportableKey = {
        type: 'Secp256k1',
        privateKeyHex: privKeyHex2,
        kms: 'local'
    };


    const kidETH1 = await agent.keyManagerImport(keyETH1);
    const kidETH2 = await agent.keyManagerImport(keyETH2);

    //ECDSA over secp256k1, with Ethereum's message prefix
    const PoO1 = await agent.keyManagerSign({keyRef: kidETH1.kid, data: payload,
        algorithm : "eth_signMessage", encoding: "utf-8" })

    const PoO2 = await agent.keyManagerSign({keyRef: kidETH2.kid, data: payload,
        algorithm : "eth_signMessage", encoding: "utf-8" })

    const did1 =  `did:ethr:sepolia:${address}`
    let expectedAddress = did1.split(':').pop()?.toLowerCase();
    let recoveredAddress = ethers.verifyMessage(payload, PoO1).toLowerCase();

    if (recoveredAddress !== expectedAddress) {
        console.log("wtf wtf wtf did is:"+did1+ "recovered: "+recoveredAddress)
    }
    else{
        console.log("\n\n\n\nepic angry scream \n\n\n\n")
    }



    const proofs: string[] = []
    for (const i of issuers) {
        let kid_eth = await getEthKeyKidForDid(i.did)

        console.log(kid_eth)

        const signature = await agent.keyManagerSign({keyRef: kid_eth, data: payload,
            algorithm : "eth_signMessage", encoding: "utf-8" })


        let expectedAddress = i.did.split(':').pop()?.toLowerCase();
        const recoveredAddress = ethers.verifyMessage(payload, signature).toLowerCase();

        if (recoveredAddress !== expectedAddress) {
            //console.log("wtf did is:"+i.did+ "recovered: "+recoveredAddress)
        }

        proofs.push(signature)
    }
    return proofs
}
